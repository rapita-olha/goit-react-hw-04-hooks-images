(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{14:function(e,t,a){e.exports={image:"ImageGalleryItem_image__HIkjb",item:"ImageGalleryItem_item__2Zjxo"}},15:function(e,t,a){e.exports={Overlay:"Modal_Overlay__1SbXu",Modal:"Modal_Modal__dGtcp"}},16:function(e,t,a){e.exports={button:"ButtonUp_button__2SvSf",visible:"ButtonUp_visible__3hNXg"}},30:function(e,t,a){e.exports={gallery:"ImageGallery_gallery__1i_Wx"}},31:function(e,t,a){e.exports={button:"Button_button__3XlSX",Button:"Button_Button__376aZ"}},33:function(e,t,a){e.exports={grid:"App_grid__2kDeq"}},8:function(e,t,a){e.exports={searchForm:"SearchBar_searchForm__Vu2Bz",button:"SearchBar_button__3IR2H",label:"SearchBar_label__3pScr",input:"SearchBar_input__O9dSR",searchBar:"SearchBar_searchBar__qZi-v"}},81:function(e,t,a){},82:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(6),i=a.n(c),o=a(4),s=a(5),u=(a(38),a(8)),l=a.n(u),b=a(1);function d(e){var t=e.onSubmit,a=Object(n.useState)(""),r=Object(o.a)(a,2),c=r[0],i=r[1];var u=l.a.searchBar,d=l.a.searchForm,j=l.a.button,h=l.a.label,m=l.a.input;return Object(b.jsx)("header",{className:u,children:Object(b.jsxs)("form",{className:d,onSubmit:function(e){if(e.preventDefault(),""!==e.currentTarget.query.value.trim()){var a=e.currentTarget.query.value.trim().toLowerCase();t(a),e.currentTarget.reset()}else s.b.info("please type a query")},children:[Object(b.jsx)("button",{type:"submit",className:j,children:Object(b.jsx)("span",{className:h,children:"Search"})}),Object(b.jsx)("input",{className:m,name:"query",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:c,onChange:function(e){var t=e.currentTarget.value;i(t)}})]})})}var j=a(17),h=a(11),m=a(7),f=a.n(m),g=a(26),p=a.n(g),O=(a(61),a(27)),v=a(28),x=a(29),y=a.n(x),w=function(){function e(t,a){Object(O.a)(this,e),this.query="",this.page=1,this.key=t,this.baseUrl=a}return Object(v.a)(e,[{key:"fetchData",value:function(){var e=Object(h.a)(f.a.mark((function e(){var t,a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new URLSearchParams({q:this.query,page:this.page,key:this.key}),a="".concat(this.baseUrl,"image_type=photo&orientation=horizontal&per_page=12&").concat(t),e.next=4,y.a.get(a);case 4:return n=e.sent,e.abrupt("return",n.data.hits);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resetPage",value:function(){this.page=1}},{key:"incrementPage",value:function(){this.page+=1}},{key:"searchQuery",get:function(){return this.searchQuery},set:function(e){this.query=e}}]),e}(),_=a.p+"static/media/error-img.64aecb11.png";function S(){return Object(b.jsx)("div",{style:{paddingTop:"100px"},children:Object(b.jsx)("img",{src:_,alt:"welcome",width:700,style:{margin:"0 auto"}})})}var k=a.p+"static/media/welcome-sign.ae2661a0.jpg";function B(){return Object(b.jsx)("div",{style:{paddingTop:"100px"},children:Object(b.jsx)("img",{src:k,alt:"welcome",width:800,style:{margin:"0 auto"}})})}var N=a(14),E=a.n(N);function q(e){var t=e.image,a=t.webformatURL,n=t.tags,r=E.a.image,c=E.a.item;return Object(b.jsx)("li",{className:c,children:Object(b.jsx)("img",{src:a,alt:n,className:r})})}var C=a(30),I=a.n(C);function L(e){var t=e.images,a=e.trackScroll,r=e.handleOpenModal,c=I.a.gallery;return Object(n.useEffect)((function(){return window.addEventListener("scroll",a),window.removeEventListener("scroll",a)}),[]),Object(b.jsx)("ul",{className:c,onClick:r,children:t&&t.map((function(e){return Object(b.jsx)(q,{image:e},e.id)}))})}var M=a(31),T=a.n(M);function U(e){var t=e.onClick,a=T.a.button;return Object(b.jsx)("button",{type:"button",className:a,onClick:t,children:Object(b.jsx)("span",{children:"Show more"})})}var G=a(15),P=a.n(G),R=document.querySelector("#modal-root");function F(e){var t=e.closeModal,a=e.handleGalleryNav,r=e.imgIdx,i=e.children,o=e.images,u=P.a.modal,l=P.a.overlay;function d(e){switch(e.code){case"Escape":t();break;case"ArrowRight":r>=o.length-1?a(r=0):a(++r);break;case"ArrowLeft":a(r<=0?r=o.length-1:--r);break;default:s.b.info("Press ESC to exit")}}Object(n.useEffect)((function(){return window.addEventListener("keydown",d),function(){window.removeEventListener("keydown",d)}}),[]);return Object(c.createPortal)(Object(b.jsx)("div",{className:l,onClick:function(e){e.target===e.currentTarget&&t()},children:Object(b.jsx)("div",{className:u,children:i})}),R)}var D=a(32),H=a.n(D),X=a.p+"static/media/up-arrow.79fd32b5.png",A=a(16),Q=a.n(A);function V(e){var t=e.onClick,a=e.isVisible,n=Q.a.button,r=Q.a.visible;return Object(b.jsx)("button",{type:"button",className:a?H()(n,r):n,onClick:t,children:Object(b.jsx)("img",{src:X,alt:"go up"})})}var Z=new w("23099958-a9e73d010620c28e46bfb8a54","https://pixabay.com/api/?");function z(e){var t=e.query,a=Object(n.useState)([]),r=Object(o.a)(a,2),c=r[0],i=r[1],u=Object(n.useState)(!1),l=Object(o.a)(u,2),d=l[0],m=l[1],g=Object(n.useState)(!1),O=Object(o.a)(g,2),v=O[0],x=O[1],y=Object(n.useState)(!1),w=Object(o.a)(y,2),_=w[0],k=w[1],N=Object(n.useState)(!1),E=Object(o.a)(N,2),q=E[0],C=E[1],I=Object(n.useState)(0),M=Object(o.a)(I,2),T=M[0],G=M[1],P=Object(n.useState)("idle"),R=Object(o.a)(P,2),D=R[0],H=R[1];function X(){return A.apply(this,arguments)}function A(){return(A=Object(h.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.prev=1,e.next=4,Z.fetchData();case 4:if(0!==(t=e.sent).length){e.next=9;break}return s.b.warning("Sorry, we couldn't find anything"),H("idle"),e.abrupt("return");case 9:i((function(e){return[].concat(Object(j.a)(e),Object(j.a)(t))})),H("resolved"),C(!1),Z.incrementPage(),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),H("rejected"),s.b.error("Something went wrong...(");case 19:case"end":return e.stop()}}),e,null,[[1,15]])})))).apply(this,arguments)}function Q(){m((function(e){return!e}))}return Object(n.useEffect)((function(){""!==t.trim()&&(i([]),Z.searchQuery=t,Z.resetPage(),X())}),[t]),Object(n.useEffect)((function(){c.length<12?k(!1):k(!0),c.length>12&&window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}),[c.length,_]),"idle"===D?Object(b.jsx)(B,{}):"rejected"===D?Object(b.jsx)(S,{}):"resolved"===D?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(L,{images:c,showImages:X,handleOpenModal:function(e){var t=e.target;if("IMG"===t.nodeName){var a=function(e){var t;return c.forEach((function(a,n){a.webformatURL===e&&(t=n)})),t}(t.src);G(a),Q()}},trackScroll:function(){var e=window.pageYOffset,t=document.documentElement.clientHeight;e>t&&x(!0),e<t&&x(!1)}}),q&&Object(b.jsx)(p.a,{type:"Oval",color:"#da5f01",height:80,width:80,style:{margin:"0 auto"}}),_&&Object(b.jsx)(U,{onClick:X}),Object(b.jsx)(V,{onClick:function e(){window.pageYOffset>0&&(window.scrollBy(0,-80),setTimeout(e,0))},isVisible:v}),d&&Object(b.jsx)(F,{closeModal:Q,handleGalleryNav:G,imgIdx:T,images:c,children:Object(b.jsx)("img",{src:c[T].largeImageURL,alt:c[T].tags,width:1e3})})]}):void 0}var J=a(33),Y=a.n(J);function W(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Y.a.grid;return Object(b.jsxs)("div",{className:c,children:[Object(b.jsx)(d,{onSubmit:r}),Object(b.jsx)(z,{query:a}),Object(b.jsx)(s.a,{autoClose:3e3,theme:"dark"})]})}a(81);i.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(W,{})}),document.getElementById("root"))}},[[82,1,2]]]);
//# sourceMappingURL=main.1b41e060.chunk.js.map